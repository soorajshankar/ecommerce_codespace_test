{
  "customizations": {
    "vscode": {
      "extensions": [
        "HasuraHQ.hasura"
      ],
      "settings": {
        "terminal.integrated.shell.linux": "/bin/bash",
        "terminal.integrated.shellArgs.linux": [
          "-l"
        ]
      }
    }
  },
  "name": "Hasura DDN Codespace with Docker",
  "postCreateCommand": [
    "curl -L https://graphql-engine-cdn.hasura.io/ddn/cli/v2/get.sh | bash",
    "if [ $? -ne 0 ]; then echo 'Failed to install ddn CLI'; fi",
    "ddn auth login --pat $CODESPACES_SECRET_HASURA_PAT || true",  // Use "true" to continue even if login fails
    "sudo apt-get update",
    "sudo apt-get install -y apt-transport-https ca-certificates curl software-properties-common",
    "curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -",
    "sudo add-apt-repository 'deb [arch=amd64] https://download.docker.com/linux/ubuntu focal stable'",
    "sudo apt-get update",
    "sudo apt-get install -y docker-ce"
  ]
}
